<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">Blog - RISC-V 5-Stage Pipelined Simulator</title><meta name="description" content="A project aimed to catch teenagers‚Äô attention and refocus on critical societal issues with AI-driven Natural Language Processing technologies." data-next-head=""/><link rel="preload" href="/_next/static/css/bd16513a866bee7a.css" as="style"/><link rel="preload" href="/_next/static/css/de6fa09b8a0934d1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bd16513a866bee7a.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/css/de6fa09b8a0934d1.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-6224d37324e372cb.js" defer=""></script><script src="/_next/static/chunks/framework-e180e6045d9bc50e.js" defer=""></script><script src="/_next/static/chunks/main-47da192e53f5b6a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c1c7d9395cab5b58.js" defer=""></script><script src="/_next/static/chunks/07c2d338-e946331cef3076e6.js" defer=""></script><script src="/_next/static/chunks/281c3f4d-d45fe2ac146a0c05.js" defer=""></script><script src="/_next/static/chunks/8e124ec1-2dc236cab73bc166.js" defer=""></script><script src="/_next/static/chunks/918-c679dacf0d8f6e82.js" defer=""></script><script src="/_next/static/chunks/428-17effdb14a288c59.js" defer=""></script><script src="/_next/static/chunks/177-a81b92d980dfe925.js" defer=""></script><script src="/_next/static/chunks/536-fe0284cac551ee28.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-db9b41e02dca4195.js" defer=""></script><script src="/_next/static/uQrmV58TmKRDayB_IuIpK/_buildManifest.js" defer=""></script><script src="/_next/static/uQrmV58TmKRDayB_IuIpK/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>((e,r,s,u,d,m,l,h)=>{let c=document.documentElement,v=["light","dark"];function p(i){(Array.isArray(e)?e:[e]).forEach(y=>{let k=y==="class",S=k&&m?d.map(f=>m[f]||f):d;k?(c.classList.remove(...S),c.classList.add(i)):c.setAttribute(y,i)}),R(i)}function R(i){h&&v.includes(i)&&(c.style.colorScheme=i)}function a(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(u)p(u);else try{let i=localStorage.getItem(r)||s,y=l&&i==="system"?a():i;p(y)}catch(i){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div class="relative"><div class="gradient-circle"></div><div class="gradient-circle-bottom"></div><div class="container mx-auto mt-10"><div class="block tablet:hidden fixed top-0 left-0 right-0 z-50 bg-opacity-50" data-headlessui-state=""><div class="
            flex items-center justify-between px-4 py-1
            backdrop-blur-sm
            bg-gray-900/50 text-white
        "><h1 class="font-medium text-xl">Chun-Ju (Iridium)</h1><div class="flex items-center gap-4"><button class="focus:outline-none" type="button" aria-expanded="false" data-headlessui-state=""><div class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#E8E4DE] dark:hover:bg-[#6B5B4E] transition-colors"><img alt="menu" loading="lazy" width="16" height="16" decoding="async" data-nimg="1" style="color:transparent" src="/images/menu.svg"/></div></button></div></div></div><span hidden="" style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></span><div class="mt-10 hidden flex-row items-center justify-between sticky false dark:text-white top-0 z-10 tablet:flex"><h1 class="font-medium cursor-pointer mob:p-2 laptop:p-0">Chun-Ju (Iridium)</h1><div class="flex"><a class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg transition-all duration-300 ease-out first:ml-0 hover:scale-105 active:scale-100 false undefined" href="/">Home</a><a class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg transition-all duration-300 ease-out first:ml-0 hover:scale-105 active:scale-100 false undefined" href="/resume">Resume</a><a href="mailto:c.tao@nyu.edu" target="_blank" rel="noopener noreferrer" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg transition-all duration-300 ease-out first:ml-0 hover:scale-105 active:scale-100 false undefined">Contact</a></div></div><div class="mt-10 flex flex-col"><div style="position:relative;width:100%;padding-top:56.25%"><img alt="RISC-V 5-Stage Pipelined Simulator" loading="lazy" decoding="async" data-nimg="fill" class="rounded-lg shadow-lg" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;object-fit:cover;color:transparent" src="https://github.com/iridiumtao/RISC-V-Simulator/blob/master/docs/Schematic%20RISCV%20Project%20Five%20Stage.png?raw=true"/></div><h1 class="mt-10 text-4xl mob:text-2xl laptop:text-6xl text-bold">RISC-V 5-Stage Pipelined Simulator</h1><h2 class="mt-2 text-xl max-w-4xl text-darkgray opacity-50">A 5-stage pipelined RISC-V Simulator written in Python.</h2><div class="flex flex-wrap mob:flex-nowrap link"><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg transition-all duration-300 ease-out first:ml-0 hover:scale-105 active:scale-100 false undefined">GitHub Link üîó</button></div></div><div class="markdown-class"><div><p>The simulator reads the binary content of dmem.txt (data memory) and imem.txt (instruction memory) in <code>./iodir</code> and outputs step-by-step results in RFResult.txt (Register File Result) and StateResult.txt (Pipeline register state), the DMEMResult.txt (Data MEMory Result), and PerformanceMetrics_Result.txt</p>
<p>This project is part of the NYU Master of Science in Computer Engineering (MSCE) course focused on Computing Systems Architecture (CSA).</p>
<h2>Schematic</h2>
<h3>Single Stage</h3>
<p><img src="https://github.com/iridiumtao/RISC-V-Simulator/blob/master/docs/Schematic%20RISCV%20Project%20Single%20Stage.png?raw=true" alt="Schematic RISCV Project Single Stage.png">
Schematic modified from <a href="##Reference">Textbook</a> Figure 4.25</p>
<p><strong>Description:</strong></p>
<p>The simulator was designed to follow the Simple Implementation Scheme from the textbook Computer Organization and Design RISC-V Edition 2nd. To utilize the pipeline and the State class, I implemented the pipeline registers and Pipelined Control mentioned in Chapter 4.7.
However, the BNE and JAL instructions are not achievable with the Simple Implementation Scheme. So, compared to the single stage datapath from the textbook Figure 4.25, I made the following changes to complete the functionality:</p>
<ul>
<li>added 2 control signals (ALUSrcA, JAL)</li>
<li>added 1 MUX (ALU input A)</li>
<li>added 2 gates (XOR, OR)</li>
<li>modified a MUX (ALU input B)</li>
<li>connected PC to a MUX(ALU input A) and instruction[12] to the XOR gate.</li>
</ul>
<h3>Five Stage</h3>
<p><img src="https://github.com/iridiumtao/RISC-V-Simulator/blob/master/docs/Schematic%20RISCV%20Project%20Five%20Stage.png?raw=true" alt="Schematic RISCV Project Five Stage.png">
Modified from <a href="##Reference">Textbook</a> Figure 4.62</p>
<p><strong>Description:</strong></p>
<p>In the Five-Stage machine, I added the forwarding unit and the hazard control unit to solve hazards introduced in the Mulit-stage pipeline. I kept the design of the control unit and PCSrc (from the result of 3 logic gates) and significantly modified other parts of the branch condition  by moving it from the EX stage to the ID stage. Additionally, I implemented a dedicated forwarding unit to handle branch decision input choices.</p>
</div></div><div class="flex flex-wrap mob:flex-nowrap link"><button type="button" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg transition-all duration-300 ease-out first:ml-0 hover:scale-105 active:scale-100 false undefined">GitHub Link üîó</button></div><div class="mt-5 laptop:mt-40 p-2 laptop:p-0"><h1 class="text-2xl text-bold">Contact</h1><div class="mt-5"><div class="undefined flex flex-wrap mob:flex-nowrap link"><a href="https://github.com/iridiumtao" target="_blank" rel="noopener noreferrer" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg transition-all duration-300 ease-out first:ml-0 hover:scale-105 active:scale-100 false undefined">Github</a><a href="https://linkedin.com/in/chun-ju-tao-3b1485254/" target="_blank" rel="noopener noreferrer" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg transition-all duration-300 ease-out first:ml-0 hover:scale-105 active:scale-100 false undefined">LinkedIn</a><a href="mailto:c.tao@nyu.edu" target="_blank" rel="noopener noreferrer" class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg transition-all duration-300 ease-out first:ml-0 hover:scale-105 active:scale-100 false undefined">Email</a><a class="text-sm tablet:text-base p-1 laptop:p-2 m-1 laptop:m-2 rounded-lg transition-all duration-300 ease-out first:ml-0 hover:scale-105 active:scale-100 false undefined" href="/resume">Resume</a></div></div></div><h1 class="text-sm text-bold mt-2 laptop:mt-10 p-2 laptop:p-0">Made With ‚ù§ by<!-- --> <a class="underline underline-offset-1">Chun-Ju (Iridium) Tao</a></h1></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"date":"2024-12-12T11:50:54.000Z","slug":"RISC-V-Simulator","preview":"A project aimed to catch teenagers‚Äô attention and refocus on critical societal issues with AI-driven Natural Language Processing technologies.","title":"RISC-V 5-Stage Pipelined Simulator","tagline":"A 5-stage pipelined RISC-V Simulator written in Python.","image":"https://github.com/iridiumtao/RISC-V-Simulator/blob/master/docs/Schematic%20RISCV%20Project%20Five%20Stage.png?raw=true","links":[{"name":"GitHub","url":"https://github.com/iridiumtao/RISC-V-Simulator"}],"content":"\u003cp\u003eThe simulator reads the binary content of dmem.txt (data memory) and imem.txt (instruction memory) in \u003ccode\u003e./iodir\u003c/code\u003e and outputs step-by-step results in RFResult.txt (Register File Result) and StateResult.txt (Pipeline register state), the DMEMResult.txt (Data MEMory Result), and PerformanceMetrics_Result.txt\u003c/p\u003e\n\u003cp\u003eThis project is part of the NYU Master of Science in Computer Engineering (MSCE) course focused on Computing Systems Architecture (CSA).\u003c/p\u003e\n\u003ch2\u003eSchematic\u003c/h2\u003e\n\u003ch3\u003eSingle Stage\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/iridiumtao/RISC-V-Simulator/blob/master/docs/Schematic%20RISCV%20Project%20Single%20Stage.png?raw=true\" alt=\"Schematic RISCV Project Single Stage.png\"\u003e\nSchematic modified from \u003ca href=\"##Reference\"\u003eTextbook\u003c/a\u003e Figure 4.25\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDescription:\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eThe simulator was designed to follow the Simple Implementation Scheme from the textbook Computer Organization and Design RISC-V Edition 2nd. To utilize the pipeline and the State class, I implemented the pipeline registers and Pipelined Control mentioned in Chapter 4.7.\nHowever, the BNE and JAL instructions are not achievable with the Simple Implementation Scheme. So, compared to the single stage datapath from the textbook Figure 4.25, I made the following changes to complete the functionality:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eadded 2 control signals (ALUSrcA, JAL)\u003c/li\u003e\n\u003cli\u003eadded 1 MUX (ALU input A)\u003c/li\u003e\n\u003cli\u003eadded 2 gates (XOR, OR)\u003c/li\u003e\n\u003cli\u003emodified a MUX (ALU input B)\u003c/li\u003e\n\u003cli\u003econnected PC to a MUX(ALU input A) and instruction[12] to the XOR gate.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eFive Stage\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/iridiumtao/RISC-V-Simulator/blob/master/docs/Schematic%20RISCV%20Project%20Five%20Stage.png?raw=true\" alt=\"Schematic RISCV Project Five Stage.png\"\u003e\nModified from \u003ca href=\"##Reference\"\u003eTextbook\u003c/a\u003e Figure 4.62\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDescription:\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eIn the Five-Stage machine, I added the forwarding unit and the hazard control unit to solve hazards introduced in the Mulit-stage pipeline. I kept the design of the control unit and PCSrc (from the result of 3 logic gates) and significantly modified other parts of the branch condition  by moving it from the EX stage to the ID stage. Additionally, I implemented a dedicated forwarding unit to handle branch decision input choices.\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"RISC-V-Simulator"},"buildId":"uQrmV58TmKRDayB_IuIpK","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>